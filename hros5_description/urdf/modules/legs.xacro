<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

	<xacro:macro name="legs_links_joints" params="side reflect">
		<joint name="${side}HipYaw" type="revolute">
			<parent link="base_link"/>
			<child link="${side}Hip"/>
			<!-- <origin xyz="-0.00145 0.048 -0.071931" rpy="0 0 0"/> -->
			<origin xyz="0.0175 ${reflect*0.048} -0.063" rpy="0 0 0"/>
			<axis xyz="0 0 1"/>
			<limit lower="-0.523598776" upper="0.523598776" effort="8.4" velocity="4.712388975"/>
		</joint>
		<link name="${side}Hip">
			<xacro:visuals_collisions_hip side="${side}"/>
		</link>
		<joint name="${side}HipRoll" type="revolute">
			<parent link="${side}Hip"/>
			<child link="${side}HipMotors"/>
			<!-- <origin xyz="0.047519 0.048 -0.097025" rpy="0 0 0"/> 0.0033019-->
			<origin xyz="-0.0675 0 -0.034" rpy="0 0 0"/>
			<axis xyz="1 0 0"/>
			<limit lower="-0.785398163" upper="0.785398163" effort="8.4" velocity="4.712388975"/>
		</joint>
		<link name="${side}HipMotors">
			<xacro:visuals_collisions_hip_motors side="${side}"/>
		</link>
		<joint name="${side}HipPitch" type="revolute">
			<parent link="${side}HipMotors"/>
			<child link="${side}Thigh"/>
			<origin xyz="0.0705 0 0" rpy="0 0 0"/>
			<axis xyz="0 1 0"/>
			<limit lower="-1.57079633" upper="1.57079633" effort="8.4" velocity="4.712388975"/>
		</joint>
		<link name="${side}Thigh">
			<xacro:visuals_collisions_thigh side="${side}"/>
		</link>
		<joint name="${side}KneePitch" type="revolute">
			<parent link="${side}Thigh"/>
			<child link="${side}Tibia"/>
			<origin xyz="0.0017 0 -0.127" rpy="0 0 0"/>
			<axis xyz="0 1 0"/>
			<limit lower="-2.7925268" upper="2.7925268" effort="8.4" velocity="4.712388975"/>
		</joint>
		<link name="${side}Tibia">
			<xacro:visuals_collisions_tibia side="${side}"/>
		</link>
		<joint name="${side}AnklePitch" type="revolute">
			<parent link="${side}Tibia"/>
			<child link="${side}Ankle"/>
			<origin xyz="-0.002 0 -0.125" rpy="0 0 0"/>
			<!-- <origin xyz="0.024303 0.052837 -0.336141" rpy="0 0 0"/> -->
			<axis xyz="0 1 0"/>
			<limit lower="-1.57079633" upper="1.57079633" effort="8.4" velocity="4.712388975"/>
		</joint>
		<link name="${side}Ankle">
			<xacro:visuals_collisions_ankle side="${side}"/>
		</link>
		<joint name="${side}AnkleRoll" type="revolute">
			<parent link="${side}Ankle"/>
			<child link="${side}Foot"/>
			<origin xyz="-0.07 0 0" rpy="0 0 0"/>
			<axis xyz="1 0 0"/>
			<limit lower="-0.785398163" upper="0.785398163" effort="8.4" velocity="4.712388975"/>
		</joint>
		<link name="${side}Foot">
			<xacro:visuals_collisions_foot side="${side}"/>
		</link>
	</xacro:macro>

	<xacro:legs_links_joints reflect="1" side="L"/>
	<xacro:legs_links_joints reflect="-1" side="R"/>


<!-- ROS REP LINKS -->
	<joint name="l_ankle_joint" type="fixed">
		<parent link="LAnkle"/>
		<child link="l_ankle"/>
		<origin xyz="0 0 0" rpy="0 0 0"/>
	</joint>
	<link name="l_ankle"/>

	<joint name="r_ankle_joint" type="fixed">
		<parent link="RAnkle"/>
		<child link="r_ankle"/>
		<origin xyz="0 0 0" rpy="0 0 0"/>
	</joint>
	<link name="r_ankle"/>

	<joint name="l_sole_joint" type="fixed">
		<parent link="LFoot"/>
		<child link="l_sole"/>
		<origin xyz="0.0565 0.007 -0.04" rpy="0 0 0"/>
	</joint>
	<link name="l_sole"/>

	<joint name="r_sole_joint" type="fixed">
		<parent link="RFoot"/>
		<child link="r_sole"/>
		<origin xyz="0.0565 -0.007 -0.04" rpy="0 0 0"/>
	</joint>
	<link name="r_sole"/>
</robot>
